---
image: winston/room101-ci

script: |
  set -e -x

  pushd winston/
    export WINSTON_SHA=$(git rev-parse HEAD)
  popd

  pushd redgreen/
    export REDGREEN_SHA=$(git rev-parse HEAD)
  popd

  pushd prole/
    export PROLE_SHA=$(git rev-parse HEAD)
  popd

  cd room101/

  git submodule update --remote

  pushd src/winston/
    git checkout $WINSTON_SHA
  popd

  pushd src/redgreen/
    git checkout $REDGREEN_SHA
  popd

  pushd src/prole/
    git checkout $PROLE_SHA
  popd

  git add src/

  ./scripts/commit_with_shortlog

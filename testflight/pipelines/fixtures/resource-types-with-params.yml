---
resource_types:
- name: mirror-via-params
  type: mirror
  source: {}
  params: {mirror_self_via_params: true}

resources:
- name: my-resource
  type: mirror-via-params
  source: {}

jobs:
- name: resource-test
  plan:
  - get: my-resource
  - task: use-custom-resource-type
    config:
      platform: linux

      image_resource:
        type: mirror
        source: {mirror_self: true}

      inputs:
      - name: my-resource

      run:
        path: cat
        args: [my-resource/version]
